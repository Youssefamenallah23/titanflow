services:
  # 1. Your Python Brain
  titanflow-api:
    build: .
    container_name: titanflow-brain
    ports:
      - "8000:8000"
    environment:
      - GOOGLE_API_KEY=${GOOGLE_API_KEY}
    volumes:
      - ./pricing.db:/app/pricing.db
    restart: always

  # 2. n8n (Connected to your EXISTING data)
  n8n:
    image: docker.n8n.io/n8nio/n8n
    container_name: titanflow-n8n
    ports:
      - "5678:5678"
    environment:
      - N8N_SECURE_COOKIE=false
    volumes:
      # CRITICAL CHANGE: Point to your Windows User folder where old data is
      - C:/Users/ELITE/.n8n:/home/node/.n8n
    depends_on:
      - titanflow-api
    restart: always
